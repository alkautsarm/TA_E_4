<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title id="pageTitle">Home</title>
    <object th:include="fragments/fragment  ::  css" th:remove="tag"></object>
    <object th:include="fragments/fragment  ::  js" th:remove="tag"></object>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
<nav th:replace="fragments/fragment  ::  navbar"></nav>
<div class="container-fluid">

    <h1 class="text-center font-weight-bold mt-5" > Pengajuan Surat </h1>

    <div class="row mt-5 ">
        <div class="col-md-12 mx-auto">
            <div class="card">
                <div class="card-header bg-dark text-white">
                    Daftar Pengajuan Surat
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th> No</th>
                            <th th:if="${username} == 'Admin TU'">Nama Pemohon</th>
                            <th th:if="${username} == 'Kepala Sekolah'">Nama Pemohon</th>
                            <th> Jenis Surat </th>
                            <th> Nomor Surat</th>
                            <th> Waktu Pengajuan </th>
                            <th> Keterangan</th>
                            <th> Status</th>
                            <th> </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="pengajuanSurat, iterationStatus : *{listPengajuan}">
                            <td th:text="${iterationStatus.count}"> </td>
                            <td th:if="${username} == 'Admin TU'" th:text="${pengajuanSurat.user.username}" ></td>
                            <td th:if="${username} == 'Kepala Sekolah'" th:text="${pengajuanSurat.user.username}" ></td>
                            <td th:text="${pengajuanSurat.jenisSurat.nama}"></td>
                            <td th:text="${pengajuanSurat.noSurat}"></td>
                            <td th:text="${#dates.format(pengajuanSurat.tanggalPengajuan, 'dd-MM-yyyy')}"></td>
                            <td th:text="${pengajuanSurat.keterangan}"></td>
                            <td th:text="${pengajuanSurat.status}"></td>
                            <div class="inline-buttons">
                                <td>
<!--                                    <a th:href= "@{/daftar-pengajuan-surat}">-->
<!--                                        <button class="btn btn-sm btn-primary">Detail</button>-->
<!--                                    </a>-->
                                    <a th:if="${username} == 'Kepala Sekolah'" th:href= "@{'/pengajuan-surat/ubah/'
                                    + ${#httpServletRequest.remoteUser} + @{'/'} + ${pengajuanSurat.id}}">
                                        <button class="btn btn-sm btn-dark"><i class="fa fa-edit"></i> Ubah</button>
                                    </a>
                                    <a th:if="${username} == 'Admin TU' and ${pengajuanSurat.status} == 'Disetujui'"
                                       th:href= "@{'/pengajuan-surat/ubah/'+
                                    ${#httpServletRequest.remoteUser} + @{'/'} + ${pengajuanSurat.id}}">
                                        <button class="btn btn-sm btn-dark"><i class="fa fa-edit"></i> Ubah</button>
                                    </a>
                                    <a th:href= "@{'/pengajuan-surat/hapus/' + ${pengajuanSurat.id}}">
                                        <button class="btn btn-sm btn-danger"><i class="fa fa-trash"></i> Hapus
                                        </button>
                                    </a>
                                </td>
                            </div>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

</html>
